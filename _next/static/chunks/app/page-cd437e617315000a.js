(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4645:function(e,t,i){Promise.resolve().then(i.bind(i,9169))},9169:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return x}});var n=i(7437),a=i(2265);let m=[{categoryId:1,category:"Перше",items:[{itemId:1,name:"Бобові",weight:80},{itemId:2,name:"Картопля",weight:280},{itemId:3,name:"Кукурудза свіжа",weight:280},{itemId:4,name:"Пластівці",weight:80},{itemId:5,name:"Булгур",weight:80},{itemId:6,name:"Гречка",weight:80},{itemId:7,name:"Рис (не шліфований)",weight:80},{itemId:8,name:"Будь-яка крупа",weight:80},{itemId:9,name:"Цільнозернове борошно",weight:80},{itemId:10,name:"Хлібці",weight:120},{itemId:11,name:"Цільнозерновий хліб",weight:130},{itemId:12,name:"Макарони т.с.",weight:80},{itemId:13,name:"Лаваш",weight:120}]},{categoryId:2,category:"Молочка 1",items:[{itemId:14,name:"Молоко 2.5%",weight:200},{itemId:15,name:"Кефір 2.5%",weight:200},{itemId:16,name:"Несолодкий йогурт 1.5%",weight:200}]},{categoryId:3,category:"Солодощі",items:[{itemId:17,name:"Солодощі",weight:60}]},{categoryId:4,category:"М'ясне",items:[{itemId:18,name:"Телятина",weight:280},{itemId:19,name:"Печінка",weight:280},{itemId:20,name:"Куряче або індиче філе",weight:320},{itemId:21,name:"Риба (до 5% жиру)",weight:350},{itemId:22,name:"Риба (від 5% жиру)",weight:230},{itemId:23,name:"Яйця",amount:6},{itemId:24,name:"Морепродукти",weight:380}]},{categoryId:5,category:"Соуси",items:[{itemId:25,name:"Олія",weight:20},{itemId:26,name:"Майонез",weight:26},{itemId:27,name:"Авокадо",weight:110},{itemId:28,name:"Оливки",weight:140},{itemId:29,name:"Гірчиця",weight:48},{itemId:30,name:"Кетчуп",weight:72},{itemId:30,name:"Cметана",weight:98}]},{categoryId:6,category:"Молочка 2",items:[{itemId:31,name:"Сир зернистий (творог) 5%",weight:150},{itemId:32,name:"Сири м'які, тверді, плавлені",weight:50},{itemId:33,name:"Сметана 15%",weight:100},{itemId:34,name:"Масло",weight:25},{itemId:35,name:"Сало",weight:18},{itemId:36,name:"Кефір 2.5%",weight:320},{itemId:37,name:"Несолодкий йогурт 1.6%",weight:350},{itemId:38,name:"Молоко 2.5%",weight:320}]},{categoryId:7,category:"Фрукти",items:[{itemId:39,name:"Фрукти та ягоди",weight:220}]},{categoryId:8,category:"Горіхи",items:[{itemId:40,name:"Горіхи",weight:15},{itemId:41,name:"Насіння",weight:15}]},{categoryId:9,category:"Овочі",items:[{itemId:42,name:"Овочі",weight:600}]}];var s=i(8210);function l(e){let{tabs:t}=e;return(0,n.jsxs)(s.OK.Group,{children:[(0,n.jsx)(s.OK.List,{className:"flex space-x-2 rounded-xl bg-gray-800 p-2 mb-4",children:t.map(e=>(0,n.jsx)(s.OK,{className:e=>{let{selected:t}=e;return"w-full rounded-lg py-3 text-base font-medium leading-5 text-white\n              ring-white/60 ring-offset-2 ring-offset-gray-400 focus:outline-none focus:ring-2\n              ".concat(t?"bg-blue-600 shadow":"text-gray-400 hover:bg-gray-700 hover:text-white")},children:e.name},e.name))}),(0,n.jsx)(s.OK.Panels,{className:"mt-2",children:t.map((e,t)=>(0,n.jsx)(s.OK.Panel,{className:"rounded-xl bg-gray-800 p-3 ring-white/60 ring-offset-2 ring-offset-gray-400 focus:outline-none focus:ring-2",children:e.content},t))})]})}var r=i(196),o=i(8413);function d(e){let{open:t,onClose:i,onConfirm:m,itemName:s,amount:l,maxAmount:d,unit:c,onAmountChange:u}=e;return(0,n.jsx)(r.u,{appear:!0,show:t,as:a.Fragment,children:(0,n.jsxs)(o.Vq,{as:"div",className:"relative z-10",onClose:i,children:[(0,n.jsx)(r.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,n.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,n.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,n.jsx)(r.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,n.jsxs)(o.Vq.Panel,{className:"w-full max-w-md transform overflow-hidden rounded bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[(0,n.jsxs)(o.Vq.Title,{as:"h3",className:"text-lg font-medium leading-6 text-white mb-4",children:["Выберите количество для ",s]}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsxs)("div",{className:"text-center text-white mt-4 text-lg",children:[l," / ",d," ",c]}),(0,n.jsx)("div",{className:"relative px-2",children:(0,n.jsx)("input",{type:"range",min:0,max:d,value:l,onChange:e=>u(Number(e.target.value)),step:"шт"===c||d%5!=0?1:5,className:"w-full h-3 bg-gray-700 rounded-lg appearance-none cursor-pointer touch-none [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:w-6  [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-500  [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:border-none [&::-webkit-slider-thumb]:shadow-lg [&::-moz-range-thumb]:h-6 [&::-moz-range-thumb]:w-6  [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-blue-500  [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:border-none [&::-moz-range-thumb]:shadow-lg",style:{background:"linear-gradient(to right, #3b82f6 0%, #3b82f6 ".concat(l/d*100,"%, #374151 ").concat(l/d*100,"%, #374151 100%)")}})})]}),(0,n.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,n.jsx)("button",{type:"button",className:"inline-flex justify-center rounded px-4 py-3 text-base font-medium text-gray-400 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white min-w-[80px] sm:min-w-[100px]",onClick:i,children:"Отмена"}),(0,n.jsx)("button",{type:"button",className:"inline-flex justify-center rounded bg-blue-600 px-4 py-3 text-base font-medium text-white hover:bg-blue-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 min-w-[80px] sm:min-w-[100px]",onClick:m,children:"Подтвердить"})]})]})})})})]})})}function c(e){let{categories:t,selectedItems:i,onItemClick:a}=e;return(0,n.jsx)("div",{className:"space-y-6",children:t.map(e=>(0,n.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4 shadow-lg",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-white",children:e.name}),(0,n.jsxs)("span",{className:"text-sm sm:text-base text-gray-400",children:[e.availablePercentage.toFixed(0),"%"]})]}),(0,n.jsx)("ul",{className:"space-y-3",children:e.items.map(e=>{let t=e.weight||e.amount||0,m=i.find(t=>t.itemId===e.itemId),s=(null==m?void 0:m.amount)||0,l=e.weight?"г":"шт";return(0,n.jsxs)("li",{className:"flex flex-row justify-between p-3 hover:bg-gray-700 rounded-lg cursor-pointer active:bg-gray-600 transition-colors",onClick:()=>a(e.itemId,e.name,t),children:[(0,n.jsx)("span",{className:"text-white text-base sm:text-lg mb-2 sm:mb-0",children:e.name}),(0,n.jsxs)("div",{className:"text-sm sm:text-base space-y-1 space-x-4",children:[(0,n.jsxs)("span",{className:"text-emerald-400",children:[e.availableAmount,l]}),s>0&&(0,n.jsxs)("span",{className:"text-blue-400 block inline",children:[s,l]})]})]},e.itemId)})})]},e.name))})}function u(e){let{selectedItems:t,onItemClick:i}=e,a=t.filter(e=>e.amount>0&&e.isExplicitlySelected),s=m.map(e=>{let t=e.items.map(e=>{let t=a.find(t=>t.itemId===e.itemId);return t?{...e,amount:t.amount,maxAmount:t.maxAmount,unit:e.weight?"г":"шт"}:null}).filter(e=>null!==e);return{name:e.category,items:t}}).filter(e=>e.items.length>0);return(0,n.jsx)("div",{className:"space-y-6",children:s.map(e=>(0,n.jsxs)("div",{className:"bg-gray-800 rounded-xl p-4 shadow-lg",children:[(0,n.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-4",children:e.name}),(0,n.jsx)("ul",{className:"space-y-3",children:e.items.map(e=>(0,n.jsxs)("li",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 hover:bg-gray-700 rounded-lg cursor-pointer active:bg-gray-600 transition-colors",onClick:()=>i(e.itemId,e.name,e.maxAmount),children:[(0,n.jsx)("span",{className:"text-white text-base sm:text-lg mb-2 sm:mb-0",children:e.name}),(0,n.jsx)("div",{className:"text-sm sm:text-base",children:(0,n.jsxs)("span",{className:"text-blue-400",children:[e.amount,e.unit]})})]},e.itemId))})]},e.name))})}let g="nutrition-history";function h(){let[e,t]=(0,a.useState)([]),[i,s]=(0,a.useState)(!1),[r,o]=(0,a.useState)(null),[h,x]=(0,a.useState)(0),f=()=>new Date().toISOString().split("T")[0],w=()=>JSON.parse(localStorage.getItem(g)||"{}")[f()]||[],b=e=>{let t=JSON.parse(localStorage.getItem(g)||"{}"),i=f();e.length>0&&(t[i]=e),localStorage.setItem(g,JSON.stringify(t))};(0,a.useEffect)(()=>{t(w())},[]),(0,a.useEffect)(()=>{b(e)},[e]);let I=e=>e.weight?"г":"шт",p=(t,i,n)=>{let a=e.find(e=>e.itemId===t),l=m.flatMap(e=>e.items).find(e=>e.itemId===t),r=m.find(e=>e.items.some(e=>e.itemId===t));if(!r||!l)return;let d=k(l,r.items),c=(null==a?void 0:a.amount)||0;o({itemId:t,name:i,maxAmount:c+d,unit:I(l)}),x(c),s(!0)},y=()=>{s(!1),o(null)},v=e=>e.weight||e.amount||0,j=t=>t.reduce((t,i)=>{let n=e.find(e=>e.itemId===i.itemId),a=v(i);return t+((null==n?void 0:n.amount)||0)/a*100},0),N=e=>Math.max(0,100-j(e)),k=(e,t)=>{let i=N(t);return Math.floor(v(e)*i/100)},S=[{name:"Доступні",content:(0,n.jsx)(c,{categories:m.filter(e=>99.5>j(e.items)).map(e=>({name:e.category,availablePercentage:N(e.items),items:e.items.map(t=>({...t,availableAmount:k(t,e.items)}))})),selectedItems:e,onItemClick:p})},...e.some(e=>e.amount>0&&e.isExplicitlySelected)?[{name:"З'їдені",content:(0,n.jsx)(u,{selectedItems:e,onItemClick:p})}]:[]];return(0,n.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[(0,n.jsx)(l,{tabs:S}),(0,n.jsx)("button",{onClick:()=>{t([]);let e=JSON.parse(localStorage.getItem(g)||"{}"),i=f();delete e[i],localStorage.setItem(g,JSON.stringify(e))},className:"mt-4 w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded",children:"Сбросить съеденное"}),(0,n.jsx)(d,{open:i,onClose:y,onConfirm:()=>{if(r){let i=e.findIndex(e=>e.itemId===r.itemId),n=m.find(e=>e.items.some(e=>e.itemId===r.itemId));if(!n)return;if(i>=0&&e[i].amount,n.items.reduce((t,i)=>{let n=e.find(e=>e.itemId===i.itemId),a=v(i);return t+(i.itemId===r.itemId?h:(null==n?void 0:n.amount)||0)/a*100},0)>100){alert("Нельзя съесть больше 100% продуктов из группы");return}let a=[...e];i>=0?a[i]={itemId:r.itemId,amount:h,maxAmount:r.maxAmount,isExplicitlySelected:!0,unit:r.unit}:a.push({itemId:r.itemId,amount:h,maxAmount:r.maxAmount,isExplicitlySelected:!0,unit:r.unit}),t(a),y()}},itemName:(null==r?void 0:r.name)||"",amount:h,maxAmount:(null==r?void 0:r.maxAmount)||0,unit:(null==r?void 0:r.unit)||"",onAmountChange:x})]})}function x(){return(0,n.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center",children:(0,n.jsx)("div",{className:"w-full max-w-3xl",children:(0,n.jsxs)("div",{className:"relative bg-gray-900 rounded-xl shadow-2xl p-6 mx-auto",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center text-white",children:"План питания"}),(0,n.jsx)("div",{className:"relative z-10",children:(0,n.jsx)(h,{})})]})})})}i(2778)},2778:function(){}},function(e){e.O(0,[461,784,971,117,744],function(){return e(e.s=4645)}),_N_E=e.O()}]);